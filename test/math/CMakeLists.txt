if(ENABLE_PYTHON_TESTS)
    add_test(p::importNuto ${PYTHON_EXECUTABLE} -c "import nuto")
    set_property(TEST p::importNuto PROPERTY ENVIRONMENT "PYTHONPATH=${CMAKE_BINARY_DIR}/src")

    add_test(p::math::Matrix ${PYTHON_EXECUTABLE} ${CMAKE_CURRENT_SOURCE_DIR}/Matrix.py ${CMAKE_SYSTEM_NAME} ${CMAKE_SYSTEM_PROCESSOR} ${CMAKE_CURRENT_SOURCE_DIR})
    set_property(TEST p::math::Matrix PROPERTY ENVIRONMENT "PYTHONPATH=${CMAKE_BINARY_DIR}/src")

    if(ENABLE_NUMPY)
        add_test(p::math::NumpyFullMatrix ${PYTHON_EXECUTABLE} ${CMAKE_CURRENT_SOURCE_DIR}/NumpyFullMatrix.py ${CMAKE_SYSTEM_NAME} ${CMAKE_SYSTEM_PROCESSOR} ${CMAKE_CURRENT_SOURCE_DIR})
        set_property(TEST p::math::NumpyFullMatrix PROPERTY ENVIRONMENT "PYTHONPATH=${CMAKE_BINARY_DIR}/src")
    endif()

    add_test(p::math::SparseMatrixCSR ${PYTHON_EXECUTABLE} ${CMAKE_CURRENT_SOURCE_DIR}/SparseMatrixCSR.py ${CMAKE_SYSTEM_NAME} ${CMAKE_SYSTEM_PROCESSOR} ${CMAKE_CURRENT_SOURCE_DIR})
    set_property(TEST p::math::SparseMatrixCSR PROPERTY ENVIRONMENT "PYTHONPATH=${CMAKE_BINARY_DIR}/src")
endif()

if(ENABLE_C++_TESTS)

    if(ENABLE_ARPACK)
        add_executable(Arpack Arpack.cpp)
        target_link_libraries(Arpack NuToMath NuToBase ${Boost_LIBRARIES} ${OpenBLAS_LIBRARIES})
        target_link_libraries(Arpack ${ARPACK_LIBRARIES})
        add_test(c::math::Arpack ${CMAKE_CURRENT_BUILD_DIR}/Arpack)
    endif()

    add_executable(SparseMatrixTests SparseMatrixTests.cpp)
    target_link_libraries(SparseMatrixTests NuToMath NuToBase ${Boost_LIBRARIES})
    add_test(c::math::SparseMatrixTests ${CMAKE_CURRENT_BUILD_DIR}/SparseMatrixTests)
endif()

if(ENABLE_UNIT_TESTS)
    foreach(test Interpolation SerializeData)
        add_executable(${test} ${test}.cpp)
        target_link_libraries(${test} NuToMath NuToBase)
        if(DEFINED ENV{JENKINS_HOME})
            add_test(c::unit::${test} sh -c "${CMAKE_CURRENT_BINARY_DIR}/${test} -f JUNIT > TEST-${test}.xml")
        else()
            add_test(c::unit::${test} ${CMAKE_CURRENT_BINARY_DIR}/${test})
        endif()
    endforeach()
endif()
